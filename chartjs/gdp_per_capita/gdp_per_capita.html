<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line Chart with Chart.js</title>
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Bootstrap CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>

<body class="container d-flex align-items-center" style="min-height: 100vh;">
    <div class="row w-100">
        <div class="col d-flex justify-content-center">
            <canvas id="graph_01"></canvas>
        </div>
    </div>

    <!-- Chart.js Script -->
    <script>
        // Raw data
        const rawData = [
        {
          "2010": 48.65150455,
          "2011": 50.07024213,
          "2012": 51.7921198,
          "2013": 53.30229745,
          "2014": 55.13862579,
          "2015": 56.78111087,
          "2016": 57.89011874,
          "2017": 59.93293305,
          "2018": 62.85228926,
          "2019": 64.95756113,
          "2020": 63.84321964,
          "2021": 70.16274619,
          "2022": 76.44140625,
          "国名": "USA",
          "RGBコード": "250, 191, 28"
        },
        {
          "2010": 4.550473944,
          "2011": 5.618166177,
          "2012": 6.316885294,
          "2013": 7.050694067,
          "2014": 7.678556987,
          "2015": 8.066956885,
          "2016": 8.147964683,
          "2017": 8.879497784,
          "2018": 9.976741982,
          "2019": 10.21435056,
          "2020": 10.47340364,
          "2021": 12.61804115,
          "2022": 12.50394785,
          "国名": "China",
          "RGBコード": "187, 100, 29"
        },
        {
          "2010": 44.96815623,
          "2011": 48.76007895,
          "2012": 49.14528043,
          "2013": 40.8986479,
          "2014": 38.47539524,
          "2015": 34.96063938,
          "2016": 39.40073936,
          "2017": 38.89108627,
          "2018": 39.83969647,
          "2019": 40.56105447,
          "2020": 40.13421844,
          "2021": 40.14849111,
          "2022": 34.07854893,
          "国名": "Japan",
          "RGBコード": "35, 127, 196"
        },
        {
          "2010": 39.60328868,
          "2011": 42.09214863,
          "2012": 42.49027994,
          "2013": 43.41923835,
          "2014": 47.42698795,
          "2015": 44.98381641,
          "2016": 40.98804195,
          "2017": 40.62923403,
          "2018": 43.3155528,
          "2019": 42.79419494,
          "2020": 40.42015087,
          "2021": 46.89970152,
          "2022": 45.69444937,
          "国名": "UK",
          "RGBコード": "219, 83, 52"
        },
        {
          "2010": 47.23668309,
          "2011": 53.89145703,
          "2012": 55.54755531,
          "2013": 56.9674258,
          "2014": 57.56480232,
          "2015": 55.64560687,
          "2016": 56.89565831,
          "2017": 61.16489736,
          "2018": 66.836522,
          "2019": 64.92721923,
          "2020": 60.390378,
          "2021": 74.35036851,
          "2022": 84.87062305,
          "国名": "Singapore",
          "RGBコード": "145, 112, 175"
        }
      ];

        // Process data for Chart.js
        const years = Object.keys(rawData[0]).filter(key => key !== "国名" && key !== "RGBコード");
        const datasets = rawData.map(country => ({
            label: country["国名"],
            data: years.map(year => country[year]),
            fill: false,
            borderColor: `rgb(${country["RGBコード"] || '0, 0, 0'})`,
            tension: 0.1
        }));

        const config = {
            type: 'line',
            data: {
                labels: years,
                datasets: datasets
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            font: {
                                size: 18 
                            }
                        }
                    },
                    title: {
                        display: true,
                        text: '一人あたりGDPの推移 (thousand USD)',
                        font: {
                            size: 24
                        }
                    }
                }
            }
        };

        // Render the chart
        new Chart(document.getElementById('graph_01'), config);
    </script>
</body>
</html>
